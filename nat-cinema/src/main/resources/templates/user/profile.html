<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/client-layout :: layout(~{::section})}">
<head>
    <title>Hồ sơ cá nhân</title>
</head>
<body>

<section class="py-5" style="background-color: #1a1a2e; min-height: 85vh;">
    <div class="container">

        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/" class="text-decoration-none text-secondary">Trang chủ</a></li>
                <li class="breadcrumb-item active text-white" aria-current="page">Hồ sơ cá nhân</li>
            </ol>
        </nav>

        <div class="row g-4">

            <div class="col-lg-4">
                <div class="card border-0 shadow-lg text-white" style="background-color: #16213e;">
                    <div class="card-body text-center py-5">
                        <img th:src="@{'https://ui-avatars.com/api/?name=' + ${user.natFullname} + '&background=764ba2&color=fff&size=128'}"
                             class="rounded-circle mb-3 shadow border border-3 border-dark"
                             alt="Avatar">

                        <h4 class="fw-bold mb-1" th:text="${user.natFullname}">User Name</h4>
                        <p class="text-white-50 small mb-4" th:text="${user.natEmail}">email@example.com</p>

                        <div class="d-grid gap-2">
                            <a href="/bookings/my-bookings" class="btn btn-outline-light rounded-pill">
                                <i class="bi bi-ticket-perforated me-2"></i>Lịch sử đặt vé
                            </a>
                            <a href="/auth/logout" class="btn btn-outline-danger rounded-pill">
                                <i class="bi bi-box-arrow-right me-2"></i>Đăng xuất
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-8">
                <div class="card border-0 shadow-lg text-white h-100" style="background-color: #16213e;">
                    <div class="card-header bg-transparent border-bottom border-secondary py-3">
                        <h5 class="mb-0 fw-bold"><i class="bi bi-person-gear me-2"></i>Thông tin tài khoản</h5>
                    </div>

                    <div class="card-body p-4">

                        <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
                            <i class="bi bi-check-circle me-2"></i> <span th:text="${successMessage}"></span>
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>

                        <form action="/profile/update" method="post">

                            <input type="hidden" name="natUserId" th:value="${user.natUserId}">

                            <div class="mb-3">
                                <label class="form-label text-white-50">Vai trò</label>
                                <input type="text" class="form-control bg-dark text-white border-0"
                                       th:value="${user.natRole}" disabled readonly>
                            </div>

                            <div class="mb-3">
                                <label for="fullName" class="form-label">Họ và tên</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-dark border-0 text-white-50"><i class="bi bi-person"></i></span>
                                    <input type="text" class="form-control bg-dark text-white border-secondary"
                                           id="fullName" name="natFullname"
                                           th:value="${user.natFullname}" required>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="email" class="form-label">Email đăng nhập</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-dark border-0 text-white-50"><i class="bi bi-envelope"></i></span>
                                    <input type="email" class="form-control bg-dark text-white border-secondary"
                                           id="email" name="natEmail"
                                           th:value="${user.natEmail}" required>
                                </div>
                            </div>

                            <div class="mt-4 text-end">
                                <button type="submit" class="btn btn-primary px-4 rounded-pill fw-bold shadow">
                                    <i class="bi bi-save me-1"></i> Lưu thay đổi
                                </button>
                            </div>

                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

</body>
</html>